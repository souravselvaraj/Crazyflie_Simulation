<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from crazyflie_body.xacro           | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="crazyflie">
  <!-- ========= Base Footprint ========= -->
  <link name="base_footprint">
    <inertial>
      <mass value="0.0001"/>
      <inertia ixx="1e-7" ixy="0" ixz="0" iyy="1e-7" iyz="0" izz="1e-7"/>
    </inertial>
  </link>
  <link name="base_link">
    <inertial>
      <origin xyz="0 0 0.017425"/>
      <mass value="0.025"/>
      <inertia ixx="1.657e-05" ixy="8.3e-07" ixz="7.1e-07" iyy="1.665e-05" iyz="1.8e-06" izz="2.926e-05"/>
    </inertial>
    <collision name="body_collision">
      <origin xyz="0 0 0.017425"/>
      <geometry>
        <box size="0.1 0.1 0.03485"/>
      </geometry>
    </collision>
    <visual name="body_visual">
      <origin xyz="0 0 0.017425"/>
      <geometry>
        <mesh filename="file:///home/sourav/crazyflie_ws/install/crazyflie_description/share/crazyflie_description/meshes/collada_files/cf2_assembly.dae"/>
      </geometry>
    </visual>
    <!-- IMU plugin -->
    <gazebo>
      <plugin filename="ignition-gazebo-imu-system" name="ignition::gazebo::systems::Imu">
        <topic>imu</topic>
        <frame_id>base_link</frame_id>
        <orientation_reference_frame>world</orientation_reference_frame>
        <angular_velocity_noise_density>1e-4</angular_velocity_noise_density>
        <linear_acceleration_noise_density>1e-3</linear_acceleration_noise_density>
      </plugin>
    </gazebo>
  </link>
  <link name="m1_prop">
    <inertial>
      <mass value="0.0008"/>
      <!-- small but non-zero inertia values -->
      <inertia ixx="1e-7" ixy="0" ixz="0" iyy="1e-7" iyz="0" izz="2e-7"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="file:///home/sourav/crazyflie_ws/install/crazyflie_description/share/crazyflie_description/meshes/collada_files/ccw_prop.dae"/>
      </geometry>
    </visual>
    <collision>
      <geometry>
        <mesh filename="file:///home/sourav/crazyflie_ws/install/crazyflie_description/share/crazyflie_description/meshes/collada_files/ccw_prop.dae"/>
      </geometry>
    </collision>
  </link>
  <link name="m2_prop">
    <inertial>
      <mass value="0.0008"/>
      <!-- small but non-zero inertia values -->
      <inertia ixx="1e-7" ixy="0" ixz="0" iyy="1e-7" iyz="0" izz="2e-7"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="file:///home/sourav/crazyflie_ws/install/crazyflie_description/share/crazyflie_description/meshes/collada_files/cw_prop.dae"/>
      </geometry>
    </visual>
    <collision>
      <geometry>
        <mesh filename="file:///home/sourav/crazyflie_ws/install/crazyflie_description/share/crazyflie_description/meshes/collada_files/cw_prop.dae"/>
      </geometry>
    </collision>
  </link>
  <link name="m3_prop">
    <inertial>
      <mass value="0.0008"/>
      <!-- small but non-zero inertia values -->
      <inertia ixx="1e-7" ixy="0" ixz="0" iyy="1e-7" iyz="0" izz="2e-7"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="file:///home/sourav/crazyflie_ws/install/crazyflie_description/share/crazyflie_description/meshes/collada_files/ccw_prop.dae"/>
      </geometry>
    </visual>
    <collision>
      <geometry>
        <mesh filename="file:///home/sourav/crazyflie_ws/install/crazyflie_description/share/crazyflie_description/meshes/collada_files/ccw_prop.dae"/>
      </geometry>
    </collision>
  </link>
  <link name="m4_prop">
    <inertial>
      <mass value="0.0008"/>
      <!-- small but non-zero inertia values -->
      <inertia ixx="1e-7" ixy="0" ixz="0" iyy="1e-7" iyz="0" izz="2e-7"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="file:///home/sourav/crazyflie_ws/install/crazyflie_description/share/crazyflie_description/meshes/collada_files/cw_prop.dae"/>
      </geometry>
    </visual>
    <collision>
      <geometry>
        <mesh filename="file:///home/sourav/crazyflie_ws/install/crazyflie_description/share/crazyflie_description/meshes/collada_files/cw_prop.dae"/>
      </geometry>
    </collision>
  </link>
  <!-- ========= Joints ========= -->
  <joint name="body_to_footprint" type="fixed">
    <parent link="base_link"/>
    <child link="base_footprint"/>
  </joint>
  <joint name="body_to_m1_prop" type="continuous">
    <parent link="base_link"/>
    <child link="m1_prop"/>
    <origin xyz="0.031 -0.031 0.021"/>
    <axis xyz="0 0 1"/>
  </joint>
  <joint name="body_to_m2_prop" type="continuous">
    <parent link="base_link"/>
    <child link="m2_prop"/>
    <origin xyz="-0.031 -0.031 0.021"/>
    <axis xyz="0 0 1"/>
  </joint>
  <joint name="body_to_m3_prop" type="continuous">
    <parent link="base_link"/>
    <child link="m3_prop"/>
    <origin xyz="-0.031 0.031 0.021"/>
    <axis xyz="0 0 1"/>
  </joint>
  <joint name="body_to_m4_prop" type="continuous">
    <parent link="base_link"/>
    <child link="m4_prop"/>
    <origin xyz="0.031 0.031 0.021"/>
    <axis xyz="0 0 1"/>
  </joint>
  <!-- ========= Gazebo Plugins (Fortress) ========= -->
  <gazebo>
    <!-- Velocity Controller -->
    <plugin filename="ignition-gazebo-multicopter-control-system" name="ignition::gazebo::systems::MulticopterVelocityControl">
      <robotNamespace>crazyflie</robotNamespace>
      <commandSubTopic>gazebo/command/twist</commandSubTopic>
      <enableSubTopic>enable</enableSubTopic>
      <comLinkName>base_link</comLinkName>
      <velocityGain>1.25 1.25 0.2425</velocityGain>
      <attitudeGain>0.02 0.02 0.02</attitudeGain>
      <angularRateGain>0.005 0.005 0.005</angularRateGain>
      <rotorConfiguration>
        <rotor>
          <jointName>body_to_m1_prop</jointName>
          <forceConstant>1.28192e-08</forceConstant>
          <momentConstant>0.005964552</momentConstant>
          <direction>1</direction>
        </rotor>
        <rotor>
          <jointName>body_to_m2_prop</jointName>
          <forceConstant>1.28192e-08</forceConstant>
          <momentConstant>0.005964552</momentConstant>
          <direction>-1</direction>
        </rotor>
        <rotor>
          <jointName>body_to_m3_prop</jointName>
          <forceConstant>1.28192e-08</forceConstant>
          <momentConstant>0.005964552</momentConstant>
          <direction>1</direction>
        </rotor>
        <rotor>
          <jointName>body_to_m4_prop</jointName>
          <forceConstant>1.28192e-08</forceConstant>
          <momentConstant>0.005964552</momentConstant>
          <direction>-1</direction>
        </rotor>
      </rotorConfiguration>
    </plugin>
    <!-- Motor Models -->
    <plugin filename="ignition-gazebo-multicopter-motor-model-system" name="ignition::gazebo::systems::MulticopterMotorModel">
      <robotNamespace>crazyflie</robotNamespace>
      <jointName>body_to_m1_prop</jointName>
      <linkName>m1_prop</linkName>
      <turningDirection>ccw</turningDirection>
      <maxRotVelocity>2618</maxRotVelocity>
      <motorConstant>1.28192e-08</motorConstant>
      <momentConstant>0.005964552</momentConstant>
      <rotorDragCoefficient>8.06428e-05</rotorDragCoefficient>
      <rollingMomentCoefficient>1e-07</rollingMomentCoefficient>
      <rotorVelocitySlowdownSim>20</rotorVelocitySlowdownSim>
      <motorNumber>0</motorNumber>
      <motorType>velocity</motorType>
    </plugin>
    <plugin filename="ignition-gazebo-multicopter-motor-model-system" name="ignition::gazebo::systems::MulticopterMotorModel">
      <robotNamespace>crazyflie</robotNamespace>
      <jointName>body_to_m2_prop</jointName>
      <linkName>m2_prop</linkName>
      <turningDirection>cw</turningDirection>
      <maxRotVelocity>2618</maxRotVelocity>
      <motorConstant>1.28192e-08</motorConstant>
      <momentConstant>0.005964552</momentConstant>
      <rotorDragCoefficient>8.06428e-05</rotorDragCoefficient>
      <rollingMomentCoefficient>1e-07</rollingMomentCoefficient>
      <rotorVelocitySlowdownSim>20</rotorVelocitySlowdownSim>
      <motorNumber>1</motorNumber>
      <motorType>velocity</motorType>
    </plugin>
    <plugin filename="ignition-gazebo-multicopter-motor-model-system" name="ignition::gazebo::systems::MulticopterMotorModel">
      <robotNamespace>crazyflie</robotNamespace>
      <jointName>body_to_m3_prop</jointName>
      <linkName>m3_prop</linkName>
      <turningDirection>ccw</turningDirection>
      <maxRotVelocity>2618</maxRotVelocity>
      <motorConstant>1.28192e-08</motorConstant>
      <momentConstant>0.005964552</momentConstant>
      <rotorDragCoefficient>8.06428e-05</rotorDragCoefficient>
      <rollingMomentCoefficient>1e-07</rollingMomentCoefficient>
      <rotorVelocitySlowdownSim>20</rotorVelocitySlowdownSim>
      <motorNumber>2</motorNumber>
      <motorType>velocity</motorType>
    </plugin>
    <plugin filename="ignition-gazebo-multicopter-motor-model-system" name="ignition::gazebo::systems::MulticopterMotorModel">
      <robotNamespace>crazyflie</robotNamespace>
      <jointName>body_to_m4_prop</jointName>
      <linkName>m4_prop</linkName>
      <turningDirection>cw</turningDirection>
      <maxRotVelocity>2618</maxRotVelocity>
      <motorConstant>1.28192e-08</motorConstant>
      <momentConstant>0.005964552</momentConstant>
      <rotorDragCoefficient>8.06428e-05</rotorDragCoefficient>
      <rollingMomentCoefficient>1e-07</rollingMomentCoefficient>
      <rotorVelocitySlowdownSim>20</rotorVelocitySlowdownSim>
      <motorNumber>3</motorNumber>
      <motorType>velocity</motorType>
    </plugin>
    <!-- Odometry Publisher -->
    <plugin filename="ignition-gazebo-odometry-publisher-system" name="ignition::gazebo::systems::OdometryPublisher">
      <odom_topic>odometry</odom_topic>
      <odom_frame>odom</odom_frame>
      <robot_base_frame>base_link</robot_base_frame>
      <odom_publish_frequency>100</odom_publish_frequency>
      <dimensions>3</dimensions>
      <tf_topic>tf</tf_topic>
    </plugin>
  </gazebo>
</robot>
